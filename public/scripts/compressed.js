!function(){function b(a,b,c,d,e){var f=this;f.getNumOfPara=function(){return e},f.getPath=function(){return c},f.theNumberOfEachTranslations=function(){for(var a=[],b=0;b<e;b++)a.push(10);return a},f.getLink=function(){var b=firebase.database().ref().child(c+"/link");return a(b)},f.getSnoopiIpAddress=function(){var b=firebase.database().ref("ipaddress");return a(b)},f.getParagraphs=function(){var a=firebase.database().ref().child(c+"/paragraphs");return b(a)},f.getArrayofTranslations=function(){for(var f,a=[],g=1;g<1+e;g++)f=firebase.database().ref().child(c+"/paragraphs/paragraph"+g+"/"+d),a.push(b(f));return a}}function c(a,b,c,f){var g=this;g.EEHomeService=f("ExpressEntry/Home","korean",8),g.EEFederalSkilledWorkersService=f("ExpressEntry/Federal skilled workers","korean",8),d(g,g.EEHomeService),e(g,g.EEHomeService),g.auth=c(),g.adminId="0E7culXypcRT3MBc9syiqXdW5RJ2",g.auth.$onAuthStateChanged(function(a){g.firebaseUser=a,a?g.user=a.displayName:g.user="Guest "+Math.round(100*Math.random())}),g.currentPage=[0,0,0,0,0,0,0,0],g.pageSize=1,g.changeService=function(a,b){d(a,b),e(a,b)},g.addTranslation=function(a,b){g.content?g.firebaseUser?(a.$add({user:g.user,userIpaddress:g.userIpaddress,faultyCount:0,content:g.content[b].replace(/\n/g,"<br>"),timestamp:firebase.database.ServerValue.TIMESTAMP}),g.content[b]=""):alert("please log in first! but don't worry the data you have written is still alive"):alert("you ain't write anything")},g.createUserIpaddress=function(){g.firebaseUser||alert("you need to log in to save your translation"),b.get(g.SnoopiIpaddress).then(function(a){g.userIpaddress=a.data.requested_address}).catch(function(a){console.log(a.message)})},g.claimFaultyTranslation=function(a,b,c){g.firebaseUser?(b.faultyTranslation&&b.faultyTranslation[c]?(b.faultyCount--,b.faultyTranslation[c]=null):(b.faultyCount++,b.faultyTranslation||(b.faultyTranslation={}),b.faultyTranslation[c]=!0),a.$save(b)):alert("please log in first!")},g.convertTimestamp=function(a){var b=new Date(a);return b.toString().slice(4,21)},g.alert=function(a){alert(a)},g.reload=function(){a.location.reload()},g.hideTranslation=function(a,b){g.firebaseUser&&g.firebaseUser.uid==g.adminId&&(b.timestamp=b.timestamp-1e8,a.$save(b))},g.removeTranslation=function(a,b){g.firebaseUser&&g.firebaseUser.uid==g.adminId&&a.$remove(b)}}function d(a,b){b.getParagraphs().$loaded(function(b){a.paragraphs=b,a.numOfParagraphs=b.length}),a.ArrayOfTranslations=b.getArrayofTranslations(),a.link=b.getLink(),a.theNumberOfEachTranslations=b.theNumberOfEachTranslations(),a.path=b.getPath(),b.getSnoopiIpAddress().$loaded(function(b){a.SnoopiIpaddress=b.$value})}function e(a,b){for(var c=[],d=[],e=0;e<b.getNumOfPara();e++)firebaseArray=b.getArrayofTranslations()[e],firebaseArray.$loaded().then(function(b){0===b.length&&b.$add({user:"admin",content:"please translate :)",timestamp:firebase.database.ServerValue.TIMESTAMP,faultyCount:0}),latestTranslation=b[b.length-1],d.push(latestTranslation.content.replace(/<br>/g,"\n")),a.content=d,c.push(b.length),a.theNumberOfEachTranslations=c}).catch(function(a){console.log(a.message)})}function f(a,b,c){}var a={apiKey:"AIzaSyDUid3Hb5DOI0gql4OoTaMloFLEoP10AV4",authDomain:"canadaforum-18020.firebaseapp.com",databaseURL:"https://canadaforum-18020.firebaseio.com",storageBucket:"canadaforum-18020.appspot.com",messagingSenderId:"496860594601"};firebase.initializeApp(a),angular.module("mainApp",["firebase","ngSanitize","angularUtils.directives.dirPagination"]).controller("ParentController",c).controller("ChildController",f).factory("ParasAndArrayOfTransFactory",["$firebaseObject","$firebaseArray",function(a,c){return function(d,e,f){return new b(a,c,d,e,f)}}]),c.$inject=["$window","$http","$firebaseAuth","ParasAndArrayOfTransFactory"],f.$inject=["$http","$firebaseAuth","ParasAndArrayOfTransFactory"]}();